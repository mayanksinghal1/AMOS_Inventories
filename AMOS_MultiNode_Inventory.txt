[OSEv3:vars]

###########################################################################
### Ansible Vars
###########################################################################
timeout=60
ansible_become=yes
ansible_ssh_user=ec2-user

# Set variables common for all OSEv3 hosts
openshift_deployment_type=openshift-enterprise
openshift_master_api_port=8443
openshift_master_console_port=8443
containerized=false
openshift_release=v3.9
#openshift_master_identity_providers=[{'name': 'RHIDM', 'challenge': 'true', 'login': 'true', 'kind': 'LDAPPasswordIdentityProvider', 'attributes': {'id': ['dn'], 'email': ['mail'], 'name': ['cn'], 'preferredUsername': ['uid']}, 'bindDN': 'cn=directory manager', 'bindPassword': 'redhat123', 'insecure': 'true', 'url': 'ldap://idm.amosdemo.io:389/cn=users,cn=accounts,dc=eu-west-2,dc=compute,dc=internal?uid'}]
openshift_master_cluster_method=native
openshift_master_cluster_hostname=master002-internal.amosdemo.io
openshift_master_cluster_public_hostname=master002.amosdemo.io
openshift_master_overwrite_named_certificates=true
openshift_set_hostname=true
#openshift_install_examples=true
openshift_image_tag=v3.9.27
openshift_pkg_version=-3.9.27

system_images_registry="registry.access.redhat.com"
oreg_url_master=registry.access.redhat.com/openshift3/ose-${component}:${version}
oreg_url_node=registry.access.redhat.com/openshift3/ose-${component}:${version}

openshift_disable_check=disk_availability,docker_image_availability,docker_storage,memory_availability,package_availability,package_version
openshift_docker_use_system_container=false
#hosted_logging_deployer_version=latest
#openshift_logging_install_logging=true
openshift_node_kubelet_args={'image-gc-high-threshold': ['90'], 'image-gc-low-threshold': ['80']}
openshift_master_default_subdomain=apps002.amosdemo.io
openshift_hosted_router_selector='region=infra'
openshift_registry_selector='region=infra'
os_sdn_network_plugin_name='redhat/openshift-ovs-multitenant'
openshift_enable_service_catalog=false
#ansible_service_broker_install=false


#### Openshift Metric Vars ########
openshift_metrics_install_metrics=true
#openshift_hosted_metrics_deploy=true
#openshift_hosted_metrics_public_url=https://hawkular-metrics.apps002.amosdemo.io/hawkular/metrics
openshift_metrics_hawkular_hostname=hawkular-metrics.{{openshift_master_default_subdomain}}
openshift_metrics_cassandra_storage_type=dynamic
openshift_metrics_start_cluster=true

#  Set upgrade restart mode for full system restarts
#openshift_rolling_restart_mode=system
#openshift_storage_glusterfs_wipe=false

openshift_logging_install_logging=true
#openshift_logging_storage_kind=dynamic
openshift_logging_es_pvc_dynamic=true

nagios_server_hostname=nagios.amosdemo.io
#redhat_organization_id=7458042
#redhat_activationkey=
#dynamic_volumes_check=false
#htpasswd auth
openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider','filename': '/etc/origin/master/htpasswd'}]
openshift_master_htpasswd_file=/usr/share/ansible/openshift-ansible/htpasswd/.htpasswd


openshift_storage_glusterfs_wipe=true
openshift_storage_glusterfs_is_native=true
openshift_storage_glusterfs_storageclass=true
openshift_hosted_registry_storage_kind=glusterfs
openshift_storage_glusterfs_namespace=glusterfs
openshift_storage_glusterfs_name=storage
os_firewall_use_firewalld=True



[OSEv3:children]
masters
etcd
glusterfs
nodes

[masters]
amos002-master1.amosdemo.io openshift_ip=172.31.34.33 openshift_hostname=ip-172-31-34-33.eu-west-1.compute.internal openshift_public_hostname=amos002-master1.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-master2.amosdemo.io openshift_ip=172.31.15.46 openshift_hostname=ip-172-31-15-46.eu-west-1.compute.internal openshift_public_hostname=amos002-master2.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-master3.amosdemo.io openshift_ip=172.31.17.125 openshift_hostname=ip-172-31-17-125.eu-west-1.compute.internal openshift_public_hostname=amos002-master3.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

[etcd]
amos002-master1.amosdemo.io openshift_ip=172.31.34.33 openshift_hostname=ip-172-31-34-33.eu-west-1.compute.internal openshift_public_hostname=amos002-master1.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-master2.amosdemo.io openshift_ip=172.31.15.46 openshift_hostname=ip-172-31-15-46.eu-west-1.compute.internal openshift_public_hostname=amos002-master2.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-master3.amosdemo.io openshift_ip=172.31.17.125 openshift_hostname=ip-172-31-17-125.eu-west-1.compute.internal openshift_public_hostname=amos002-master3.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

[nodes]
amos002-master1.amosdemo.io openshift_ip=172.31.34.33 openshift_hostname=ip-172-31-34-33.eu-west-1.compute.internal openshift_public_hostname=amos002-master1.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'master'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem
amos002-master2.amosdemo.io openshift_ip=172.31.15.46 openshift_hostname=ip-172-31-15-46.eu-west-1.compute.internal openshift_public_hostname=amos002-master2.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'master'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-master3.amosdemo.io openshift_ip=172.31.17.125 openshift_hostname=ip-172-31-17-125.eu-west-1.compute.internal openshift_public_hostname=amos002-master3.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'master'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-infra1.amosdemo.io openshift_ip=172.31.43.213 openshift_hostname=ip-172-31-43-213.eu-west-1.compute.internal openshift_public_hostname=amos002-infra1.amosdemo.io openshift_node_labels="{'region': 'infra', 'zone': 'eu-west-1a', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-infra2.amosdemo.io openshift_ip=172.31.14.3 openshift_hostname=ip-172-31-14-3.eu-west-1.compute.internal openshift_public_hostname=amos002-infra2.amosdemo.io openshift_node_labels="{'region': 'infra', 'zone': 'eu-west-1b', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-infra3.amosdemo.io openshift_ip=172.31.25.124 openshift_hostname=ip-172-31-25-124.eu-west-1.compute.internal openshift_public_hostname=amos002-infra3.amosdemo.io openshift_node_labels="{'region': 'infra', 'zone': 'eu-west-1c', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-compute1.amosdemo.io openshift_ip=172.31.33.120 openshift_hostname=ip-172-31-33-120.eu-west-1.compute.internal openshift_public_hostname=amos002-compute1.amosdemo.io openshift_node_labels="{'region': 'primary', 'zone': 'eu-west-1a', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-compute2.amosdemo.io openshift_ip=172.31.1.54 openshift_hostname=ip-172-31-1-54.eu-west-1.compute.internal openshift_public_hostname=amos002-compute2.amosdemo.io openshift_node_labels="{'region': 'primary', 'zone': 'eu-west-1b', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-compute3.amosdemo.io openshift_ip=172.31.25.153 openshift_hostname=ip-172-31-25-153.eu-west-1.compute.internal openshift_public_hostname=amos002-compute3.amosdemo.io openshift_node_labels="{'region': 'primary', 'zone': 'eu-west-1c', 'role': 'infra'}" ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-glusterfs1.amosdemo.io openshift_ip=172.31.34.242 openshift_hostname=ip-172-31-34-242.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs1.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'app'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem
amos002-glusterfs2.amosdemo.io openshift_ip=172.31.1.36 openshift_hostname=ip-172-31-1-36.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs2.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'app'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

amos002-glusterfs3.amosdemo.io openshift_ip=172.31.21.150 openshift_hostname=ip-172-31-21-150.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs3.amosdemo.io ansible_ssh_user=ec2-user openshift_node_labels="{'role': 'app'}" ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem

[glusterfs]
amos002-glusterfs1.amosdemo.io openshift_ip=172.31.34.242 openshift_hostname=ip-172-31-34-242.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs1.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem glusterfs_devices='[ "/dev/xvde" ]'

amos002-glusterfs2.amosdemo.io openshift_ip=172.31.1.36 openshift_hostname=ip-172-31-1-36.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs2.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem glusterfs_devices='[ "/dev/xvde" ]'

amos002-glusterfs3.amosdemo.io openshift_ip=172.31.21.150 openshift_hostname=ip-172-31-21-150.eu-west-1.compute.internal openshift_public_hostname=amos002-glusterfs3.amosdemo.io ansible_ssh_user=ec2-user ansible_ssh_private_key_file=/home/ec2-user/.ssh/AMOS-Infra.pem glusterfs_devices='[ "/dev/xvde" ]'
